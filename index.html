<!DOCTYPE html>
<html>
    <head>
        <title>O-Community</title>
        <!-- <link rel="stylesheet" type="text/css" href="style.css"> -->
        <link rel="stylesheet" href="index.css">
        <link rel="stylesheet" href="aboutus.css">
        <link rel="stylesheet" href="signcss.css">
        <link rel="stylesheet" href="./css/swiper-bundle.min.css">
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <!--the nav bar-->
        <div class="navbar">
            <div class="logo">O-Community</div>
            <div class="bar-item">
                <a href="#id4" class="nav-item about-us">About us</a>
                <a href="" class="nav-item news">News</a>
                <a href="#id2" class="nav-item posts">Posts</a>
                <a href="#id1" class="nav-item contacts">Contacts</a>
                <div class="login nav-item">
                    <div class="dropdown">
                        <a class="dropbtn" id="logined">Log in</a>
                        <div class="dropdown-content" id="drop-menu">
                            <a href="login.html">Log in</a>
                            <a href="logout.html" id="log-out">Log out</a>
                        </div>
                    </div>
                </div>
                <div class="nav-item">
                    <div class="sign">
                        <a href="#id3" class="nav-item sign_up">Sign up</a>
                    </div>
                </div>
            </div>
        </div>
        <section class="swiper carousel">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="./image/background.png" alt="" class="carousel-img">
                    <span class="carousel-tootip">Small Effort Make Big Change</span>
                </div>
                <div class="swiper-slide">
                    <img src="./image/background.png" alt="" class="carousel-img">
                    <span class="carousel-tootip">Small Effort Make Big Change</span>
                </div>
                <div class="swiper-slide">
                    <img src="./image/background.png" alt="" class="carousel-img">
                    <span class="carousel-tootip">Small Effort Make Big Change</span>
                </div>
            </div>
            <!--  if need pagenation-->
            <div class="swiper-pagination"></div>
            <!-- if need Navigation button -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </section>


        <div class="fullscreen-div">            
            <div class="rectangle">
                <div class="social">
                    Social News Hotspots
                </div>
                <div class="container" id="campaign">
                    <div class="image-container">
                        <img class="image" src="image/bear.jpg" alt="bear">
                        <p class="imgtext">The power of vulnerability</p>
                    </div>
                    <div class="image-container">
                        <img class="image" src="image/people.png" alt="people">
                        <p class="imgtext">Your body language may
                            shape who you are</p>
                    </div>
                    <div class="image-container">
                        <img class="image" src="image/shark.png" alt="shark">
                        <p class="imgtext">The future we're building --
                            and boring</p>
                    </div>
                </div>
            </div>
        </div>
        <form class="blog">
            <div class="top-buttons">
                <button class="blog-button">Status</button>
                <button class="blog-button" style="background-color:
                    yellow;">Blogpost</button>
                <button class="blog-button">Poll</button>
            </div>
            <textarea class="blog-textarea" placeholder="Hi, share your post here..."></textarea>
            <div class="bottom-buttons">
                <button class="discard-button" id="discard">Discard</button>
                <button type="submit" class="post-button" id="post">Post</button>
            </div>
        </form>

        <div class="blog-share" id="blog-share">
            <div class="header">
                <img class="avatar" src="image/sunset.png" alt="Avatar">
                <div class="info">
                    <h2>user
                    </h2>
                    <p>2 minuite ago</p>
                </div>
            </div>
            <div class="content" id="blog-content">
                <p>This talk was presented at an official TED conference.
                    TED's editors chose to feature it for you. </p>
                <img class="image" src="image/sunset.png" alt="Image">
            </div>
            <div class="interactions">
                <div class="likes-comments-shares">
                    <span class="heart">‚ù§Ô∏è&nbsp; &nbsp; 26</span>
                    <p"><span>2</span> comments &nbsp;<span>1</span> share</p>
                </div>

            </div>
            <div class="buttons">
                <button class="blog-button2">üëçReact</button>
                <button class="blog-button2">üê±Comment</button>
                <button class="blog-button2">üê∏Share</button>
            </div>
        </div>
        
        <div class="blog-share2">
            <div class="header">
                <h1 id="id1">O-Community</h1>
            </div>
            <div class="content">
                <h2>Contact Us</h2>
                <form>
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" id="name" placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="message">Message:</label>
                        <textarea id="message" rows="5"
                            placeholder="Enter message">
                        </textarea>
                    </div>
                    <button class="send-button" type="submit">Send</button>
    
                </form>
                <br>
                <button class="back-button"
                    onclick="window.location.href='index.html'">back
                    to home </button>
            </div>
    

            <!--sign up-->
            <form action="" id="signup-form">
                <div class="login-form">
                    <h2 id="id3">Create a new account</h2>
                    <div class="input-wrapper">
                        <input type="text" placeholder="First name" id="signup-firstName" style="width:
                            130px;">
                        <input type="text" placeholder="Last name" id="signup-lastName" style="width:
                            130px;">
                    </div>
                    <input type="text" placeholder="Email or Phone number" id="signup-email">
                    <input type="password" placeholder=" Create Password" id="signup-password">
                    <button class="create-account-button" type="submit">Registration</button>
                    <br>
                    <br>
                    <a href="login.html" style="text-decoration: none; color: orange;">Already
                        have an account ? </a>
                </div>
            </form>
            <div class="header">
                <h1 id="id2">O-Community</h1>
            </div>
            <div class="content">
                <h2>Create a Post</h2>
                <form enctype="multipart/form-data" action="your-backend-url"
                    method="POST">
                    <div class="form-group">
                        <label for="title">Title:</label>
                        <input type="text" id="title" name="title"
                            placeholder="Enter the title">
                    </div>
                    <div class="form-group">
                        <label for="content">Content:</label>
                        <textarea id="content" name="content" rows="5"
                            placeholder="Enter the content"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="image">click me to select your image</label>
                        <input type="file" id="image" name="image">
                    </div>
                    <button class="submit-button" type="submit">Submit</button>
                </form>
            </div>

            <div class="header" id="id4">
                <h1>Welcome to Our Social Awareness Platform</h1>
            </div>
            <div class="content">
                <h2>Project Overview</h2>
                <p>This project is all about developing a Social Awareness Platform
                    exclusively for university students across Australia. Our main
                    goal is to create a centralized space where students can engage
                    in discussions, share valuable resources, and raise awareness
                    about various social issues. We also provide a platform for
                    small business owners to promote their businesses and generate
                    leads, offering information closely related to students' studies
                    and daily lives. This includes social training, internship
                    opportunities, and the latest industry news. By combining social
                    events and small business outreach, we aim to foster community
                    engagement and support among Australian university students
                    while encouraging economic growth.</p>
    
                <h2>Project Scope</h2>
                <p>Our project scope involves the development of a single-page
                    web-based social awareness site with the following features:</p>
                <table>
                    <tr>
                        <th>Goal</th>
                        <th>Description</th>
                        <th>In/Out</th>
                    </tr>
                    <tr>
                        <td>User Registration and Authentication</td>
                        <td>Provide secure user registration and authentication
                            systems to protect user information.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>User Login and Logoff</td>
                        <td>Enable users to log in and log off from the website.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>User Profiles</td>
                        <td>Allow users to define personal information and access
                            features like changing passwords.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Homepage with Campaigns</td>
                        <td>Create a visually appealing homepage that integrates
                            social cognition information.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Discussion Platform</td>
                        <td>Enable users to engage in conversations and share ideas
                            for further cooperation.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Case Release and Reply</td>
                        <td>Allow users to create and share social causes and
                            related information.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Resource Sharing</td>
                        <td>Provide a platform for users to share educational
                            resources (articles, videos, documents, links) about
                            social issues and causes.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Notifications and Alerts</td>
                        <td>Notify users about important information or the latest
                            consultations.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Security and Privacy</td>
                        <td>Ensure the protection of user data and compliance with
                            relevant privacy regulations.</td>
                        <td>In</td>
                    </tr>
                    <tr>
                        <td>Advertisement</td>
                        <td>Generate revenue for web pages through advertising and
                            facilitate the discovery of potential users.</td>
                        <td>Out</td>
                    </tr>
                </table>
            </div>


        </div>
     
    </body>
    <script>
        // Áî®Êà∑‰ø°ÊÅØ„ÄÅÊ¥ªÂä®„ÄÅÊó•Âøó
        var name = ''
        var campaigns = []
        var blogs = []
document.addEventListener("DOMContentLoaded",()=>{
    let userId = localStorage.getItem("user")
    if(!userId) return
    let users = JSON.parse(localStorage.getItem("users"))
    if(users) {
        users.forEach(user=>{
            // debugger
            if(user._id === userId) {
                campaigns = user.campaigns
                blogs = user.blogs
                name = user.name
            }
        })
        let logined = document.querySelector("#logined")
        let dropMenu = document.querySelector("#drop-menu")
        logined.innerHTML = name
        // console.log(dropMenu.children)
        dropMenu.children[0].style.display = 'none'
        // dropMenu.classList.add("hidden")
    }
})
let logOut = document.querySelector("#log-out")
// ÁôªÂá∫
logOut.addEventListener("click",(ev)=>{
    ev.preventDefault()
    let user = localStorage.getItem("user")
    if(!user) return
    localStorage.clear()
    let logined = document.querySelector("#logined")
    logined.innerHTML = "Log in"
    let dropMenu = document.querySelector("#drop-menu")
    dropMenu.children[0].style.display = 'block'
    location.reload()
})
        // JavaScript code which using it to drop the menu
document.addEventListener("DOMContentLoaded", function() {
    var dropdowns = document.getElementsByClassName("dropdown");
    for (var i = 0; i < dropdowns.length; i++) {
        dropdowns[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var dropdownContent = this.querySelector(".dropdown-content");
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }
});

//scroll content

document.addEventListener("DOMContentLoaded", function() {
    var links = document.querySelectorAll(".nav-item");
    var login = document.querySelectorAll(".dropdown")
    
    // links.push(document.querySelectorAll(".dropdown"))
    links.forEach(function(link) {
        link.addEventListener('click', function(event) {
            let reg = /\.html$/.test(event.target.getAttribute("href"))
            let content = event.target.innerText
            if(reg || content.toLocaleLowerCase() == "log in") return
            event.preventDefault(); // prevent the default action
            var target = document.getElementById(this.getAttribute('href').substring(1)); // get the target element
            var topPos = window.pageYOffset + target.getBoundingClientRect().top; // get its position relative to the viewport

            // initiate scrolling
            window.scrollTo({
                top: topPos,
                behavior: "smooth"
            });
        });
    });
});
 // Signup
     
 document.addEventListener("DOMContentLoaded", function() {
  
    function handleSignup(event) {
  event.preventDefault();

  var firstName = document.querySelector("#signup-firstName").value;
  var lastName = document.querySelector("#signup-lastName").value;
  var nameValue = firstName + " " + lastName;

  var emailValue = document.querySelector("#signup-email").value;
  var passwordValue = document.querySelector("#signup-password").value;

  var User = {
    name: nameValue,
    email: emailValue,
    password: passwordValue
  };

  fetch("https://wil-backend-ocnh.vercel.app/api/user/signup", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(User)
  })
    .then(response => {
      if (!response.ok) {
        throw new Error("Signup failed");
      }
      return response.json();
    })
    .then(data => {
      console.log(data);
      alert('Signup successful');
    })
    .catch(error => {
      console.error("Error:", error);
      alert("Signup failed!! Please try again later.");
    });
}
var signupForm = document.querySelector("#signup-form");
  signupForm.addEventListener("submit", handleSignup);
});




// let campaignListData = []           // There is no excuse to return data for the time being. It is occupied here.
document.addEventListener("DOMContentLoaded",(ev)=>{
    
    
    let user = localStorage.getItem("user")
    // user login
    if(user) {
        axios.get("https://wil-backend-ocnh.vercel.app/api/campaign").then(res=>{
            console.log(res)
            const {data} = res
            let campaign = document.querySelector("#campaign")
                let campaignHTML = ''
                data.campaigns.forEach(item =>{
                    // console.log(item,campaigns)
                    if(!campaigns.find((campaign)=>item._id === campaign)) return
                    let temp = `
                    <div class="image-container">
                        <img class="image" src="image/${item.image}.jpg" alt="bear">
                        <p class="imgtext">${item.description}</p>
                    </div>
                    `
                    campaignHTML += temp
                })
                campaign.innerHTML = campaignHTML
        })

    } else {        // user not login
        fetch("https://wil-backend-ocnh.vercel.app/api/campaign").then(res=>{
            // console.log(res)
            if(res.status===200) {
                res.json().then(res=>{
                    console.log('res--->', res)
                    let campaign = document.querySelector("#campaign")
                    let campaignHTML = ''
                    res.campaigns.forEach(item =>{
                        let temp = `
                        <div class="image-container">
                            <img class="image" src="image/${item.image}.jpg" alt="bear">
                            <p class="imgtext">${item.description}</p>
                        </div>
                        `
                        campaignHTML += temp
                    })
                    campaign.innerHTML = campaignHTML  
                })
            }
           
        })

    }
    
})

document.addEventListener("DOMContentLoaded", (ev)=>{
    let blog = document.querySelector("#blog-share")
    axios.get("https://wil-backend-ocnh.vercel.app/api/blog").then(res=>{
        console.log("blog--->", res.data)
        const {data} = res
        
        let tempHTML = ''
        // let users = localStorage
        data.blogs.forEach(item =>{
            if(!blogs.find(blog =>item._id === blog)) return
            tempHTML += `
            <div class="header">
                <img class="avatar" src="image/${['people','sdfier', 'shark','sunset','bear'].includes(item.image) ? item.image : 'sunset'}.png" alt="Avatar">
                <div class="info">
                    <h2>${name}</h2>
                    <p>2 minuite ago</p>
                </div>
                </div>
                <div class="content" id="blog-share">
                    <p>${item.description} </p>
                    <img class="image" src="image/sunset.png" alt="Image">
                </div>
                <div class="interactions">
                    <div class="likes-comments-shares">
                        <span class="heart">‚ù§Ô∏è&nbsp; &nbsp; 26</span>
                        <p"><span>2</span> comments &nbsp;<span>1</span> share</p>
                    </div>

                </div>
                <div class="buttons">
                    <button class="blog-button2">üëçReact</button>
                    <button class="blog-button2">üê±Comment</button>
                    <button class="blog-button2">üê∏Share</button>
                </div>
            `
        })
        blog.innerHTML = tempHTML
        // console.log("res---->blog", res)
        // if(res.status === 200) {
        //     blogArr = res.data.blogs
        //     if(blogArr.length) {
        //         blog.innerHTML = `
        //         <div class="header">
        //             <img class="avatar" src="image/sunset.png" alt="Avatar">
        //             <div class="info">
        //                 <h2>user
        //                 </h2>
        //                 <p>2 minuite ago</p>
        //             </div>
        //         </div>
        //         <div class="content" id="blog-share">
        //             <p>${blogArr[0].description} </p>
        //             <img class="image" src="image/sunset.png" alt="Image">
        //         </div>
        //         <div class="interactions">
        //             <div class="likes-comments-shares">
        //                 <span class="heart">‚ù§Ô∏è&nbsp; &nbsp; 26</span>
        //                 <p"><span>2</span> comments &nbsp;<span>1</span> share</p>
        //             </div>

        //         </div>
        //         <div class="buttons">
        //             <button class="blog-button2">üëçReact</button>
        //             <button class="blog-button2">üê±Comment</button>
        //             <button class="blog-button2">üê∏Share</button>
        //         </div>
        //         `

        //     }
        // }
    })
})

let discard = document.querySelector("#discard")
let post = document.querySelector("#post")
let blogText = document.querySelector(".blog-textarea")
post.addEventListener("click", (ev)=>{
    console.log(ev)
    ev.preventDefault()
    let value = blogText.value
    let user = localStorage.getItem('user')
    let image = ['people','sdfier', 'shark','sunset','bear']
    let random = Math.floor(Math.random() * image.length)
    console.log(random)
    axios.post("https://wil-backend-ocnh.vercel.app/api/blog/add",{
        user,
        title: name,
        description: value,
        image: image[random]
    }).then(res=>{
        // console.log(res)
        axios.get("https://wil-backend-ocnh.vercel.app/api/user").then(res=>{
            // console.log(res)
            if(res.status === 200) {
                localStorage.setItem("users",JSON.stringify(res.data.users))
            }
            location.reload()

        })
    })
})


    </script>
    <script src="./js/swiper-bundle.min.js"></script>
    <script>        
        var mySwiper = new Swiper ('.swiper', {
          loop: true, // Âæ™ÁéØÊ®°ÂºèÈÄâÈ°π
          
          // Â¶ÇÊûúÈúÄË¶ÅÂàÜÈ°µÂô®
          pagination: {
            el: '.swiper-pagination',
          },
          
          // Â¶ÇÊûúÈúÄË¶ÅÂâçËøõÂêéÈÄÄÊåâÈíÆ
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
          
        })        
    </script>
</html>
